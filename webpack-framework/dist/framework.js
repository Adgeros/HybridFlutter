!function(e){var t={};function r(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){(function(e){e.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},e.judgeIsNotNull=function(e,t,r){return!!(e&&t&&r)},e.getExpValue=function(e,t){let r=(t=>new Function("","with(this){"+t+"}").bind(e)())(t);return r instanceof Object?JSON.stringify(r):r instanceof Array?JSON.stringify(r):r},r(2)}).call(this,r(0))},function(module,exports,__webpack_require__){(function(global){function loadPage(pageId){if(!pageId)return;function CC(e){this.pageId=e,this.requestData={},this.onNetworkResult=function(e,t,r){let a=this.requestData[e];a&&("success"===t?a.success(JSON.parse(r)):a.fail(JSON.parse(r)),a.complete())}}function RealPage(pageId){this.observer=new Observer,this.pageId=pageId,this.cc=new CC(pageId);let cc=this.cc;function setTimeout(e,t,...r){let a=guid();return callbacks[a]=e,callbackArgs[a]=r,__native__setTimeout(pageId,a,t),a}function clearTimeout(e){callbacks[e]&&(callbacks[e]=void 0,callbackArgs[e]=void 0),__native__clearTimeout(e)}this.__native__evalInPage=function(jsContent){jsContent||console.log("js content is empty!"),eval(jsContent)},this.__native__getExpValue=function(e,t,r,a){let i=new Watcher(e,t,r,a);this.observer.currentWatcher=i,this.observer.addWatcher(i);let n=getExpValue(this.data,a);return this.observer.currentWatcher=void 0,n},this.__native__initComplete=function(){this.observer.observe(this.data)},this.setData=function(dataObj){console.log("call setData");for(let key in dataObj){let str="this.data."+key+" = dataObj['"+key+"']";eval(str)}let startTime=Date.now(),needUpdateMapping=this.observer.assembler.getNeedUpdateMapping(),endTime=Date.now();console.log("耗时:"+(endTime-startTime)),needUpdateMapping&&this.__native__refresh(JSON.stringify(needUpdateMapping))},this.__native__removeObserverByIds=function(e){this.observer.removeWatcher(e)}}let pageObj=new RealPage(pageId);cachePage(pageId,pageObj)}function cachePage(e,t){t?pages[e]=t:console.log("page: ("+e+") is empty")}function callback(e){let t=callbacks[e];if(t){t(callbackArgs[e])}else console.log("callback: ("+e+") is empty")}__webpack_require__(3),global.pages={},global.callbacks={},global.callbackArgs={},global.getPage=function(e){return pages[e]},global.Page=function(e){global.page=e},global.loadPage=loadPage,global.callback=callback}).call(this,__webpack_require__(0))},function(e,t,r){(function(e){class t{constructor(e){this.observer=e,this.watchers={}}addWatcher(e){this.watchers[e.key()]=e}removeWatcher(e){this.watchers[e]&&delete this.watchers[e]}notify(e){for(const t in this.watchers){let r=this.watchers[t];r.value=getExpValue(e,r.script),this.observer.assembler.addPackagingObject(r.format())}}}class r{constructor(){this.packagingArray=[]}addPackagingObject(e){this.packagingArray.push(e)}getNeedUpdateMapping(){let e=this.packing();return this.packagingArray=[],e}packing(){return console.log("组装映射结果:"+JSON.stringify(this.packagingArray)),this.packagingArray}}e.Observer=class{constructor(){this.currentWatcher=void 0,this.collectors=[],this.watchers={},this.assembler=new r}observe(e){if(e&&void 0!==e&&"object"==typeof e)for(const t in e){let r=e[t];void 0!==r&&(this.defineReactive(e,t,r),(Array.isArray(r)||"object"==typeof r)&&this.observe(r))}}defineReactive(e,r,a){const i=Object.getOwnPropertyDescriptor(e,r);if(i&&!1===i.configurable)return;const n=i&&i.get,c=i&&i.set;n&&!c||2!==arguments.length||(a=e[r]);let s=this,o=new t(s);this.collectors.push(o),Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:function(){const t=n?n.call(e):a;return s.currentWatcher&&o.addWatcher(s.currentWatcher),t},set:function(t){const r=n?n.call(e):a;t===r||t!=t&&r!=r||(c?c.call(e,t):a=t,s.observe(t),o.notify(e))}})}addWatcher(e){void 0===this.watchers[e.id]&&(this.watchers[e.id]=[]),this.watchers[e.id].push(e)}removeWatcher(e){if(e){let t=[];e.forEach(e=>{this.watchers[e].forEach(e=>{t.push(e.key())}),this.watchers[e]=void 0}),this.collectors.forEach(e=>{t.forEach(t=>{e.removeWatcher(t)})})}}},e.Watcher=class{constructor(e,t,r,a){this.id=e,this.type=t,this.script=a,this.prefix=r,this.value={}}format(){let e={};return e.id=this.id,e.type=this.type,e.key=this.prefix,e.value=this.value,e}key(){return this.id+"-"+this.type+"-"+this.script}}}).call(this,r(0))}]);